<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>掃描狗狗圖片 AR 系統</title>
  <script src="https://unpkg.com/mind-ar@1.1.4/dist/mindar-image.prod.js"></script>
  <style>
    body { margin: 0; overflow: hidden; font-family: Arial; }
    #infoBtn { display: none; position: absolute; bottom: 20px; left: 20px; padding: 10px; background: #4CAF50; color: #fff; border: none; border-radius: 5px; }
    #dogInfo { display: none; position: absolute; bottom: 60px; left: 20px; background: rgba(255,255,255,0.8); padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <video id="dogVideo" width="300" controls style="position:absolute; bottom:120px; left:20px; display:none;"></video>
  <button id="infoBtn">顯示狗狗資訊</button>
  <div id="dogInfo"></div>

  <script>
    const dogData = {
      husky: { name: "哈士奇", desc: "北極雪橇犬，活潑有型。", video: "husky.mp4" },
      dog2:  { name: "柴犬", desc: "日本品種，個性傲嬌。", video: "dog2.mp4" },
      dog3:  { name: "吉娃娃", desc: "迷你玩伴，小隻精。", video: "dog3.mp4" },
      beagle:{ name: "比格犬", desc: "嗅覺敏銳，活力足。", video: "beagle.mp4" },
      doberman:{name:"杜賓狗", desc:"護衛犬種，敏捷強壯。", video:"doberman.mp4" },
      golden:{name:"黃金獵犬", desc:"溫和友善，適合家庭。", video:"golden.mp4" },
      mix:   { name: "迷克斯", desc: "混種犬，多樣性格。", video: "mix.mp4" }
    };

    document.addEventListener("DOMContentLoaded", async () => {
      const mindar = new window.MINDAR.IMAGE.MindARThree({ container: document.body, imageTargetSrc: 'hungry_and_others.mind' });
      const { renderer, camera, scene } = mindar;
      await mindar.start();

      mindar.onTargetFound = ({ index }) => {
        const key = Object.keys(dogData)[index];
        const dog = dogData[key];
        const video = document.getElementById("dogVideo");
        const infoBtn = document.getElementById("infoBtn");
        const dogInfo = document.getElementById("dogInfo");

        video.src = dog.video; video.style.display = "block";
        infoBtn.style.display = "inline-block";
        infoBtn.onclick = () => {
          dogInfo.innerHTML = `<strong>${dog.name}</strong><p>${dog.desc}</p>`;
          dogInfo.style.display = "block";
        };
      };

      mindar.onTargetLost = () => {
        document.getElementById("dogVideo").style.display = "none";
        document.getElementById("infoBtn").style.display = "none";
        document.getElementById("dogInfo").style.display = "none";
      };

      renderer.setAnimationLoop(() => {
        renderer.render(scene, camera);
      });
    });
  </script>
</body>
</html>
